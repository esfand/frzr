!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.frzr={})}(this,function(t){"use strict";function e(t,e){var n=document.createElement(t);for(var r in e)"text"===r?n.textContent=e[r]:"html"===r?n.innerHTML=e[r]:n.setAttribute(r,e[r]);return n}function n(t,e){for(var n=0;n<t.length;n++)e(t[n],n)}function r(t){if(!t||!t.length)return t;for(var e=t.length-1;e>0;e--){var n=Math.random()*e|0,r=t[e];t[e]=t[n],t[n]=r}return t}var i={};i.classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i.createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i.inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},i.possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e};var s=function(){function t(){i.classCallCheck(this,t),this.listeners={}}return i.createClass(t,[{key:"on",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({cb:e,one:!1})}},{key:"one",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({cb:e,one:!0})}},{key:"trigger",value:function(t){var e=this.listeners[t];if(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];for(var s=0;s<e.length;s++)e[s].cb.apply(this,r),e[s].one&&e.splice(s--,1)}}},{key:"off",value:function(t,e){if("undefined"==typeof t)this.listeners={};else if("undefined"==typeof e)this.listeners[t]=[];else{var n=this.listeners[t];if(!n)return;for(var r=0;r<n.length;r++)n[r].cb===e&&n.splice(r--,1)}}}]),t}(),o=["init","inited","update","updated","destroy"].reduce(function(t,e){return t[e]=!0,t},{}),u=function(t){function e(t){i.classCallCheck(this,e);var n=i.possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this));for(var r in t)o[r]?n.on(r,t[r]):n[r]=t[r];return n.trigger("init"),n.trigger("inited"),n}return i.inherits(e,t),i.createClass(e,[{key:"update",value:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];this.trigger.apply(this,["update"].concat(e))}}]),e}(s);u.extend=function(t){return function(e){function n(e){return i.classCallCheck(this,n),i.possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this,t,e))}return i.inherits(n,e),n}(u)};var l=["init","inited","update","updated","destroy"].reduce(function(t,e){return t[e]=!0,t},{}),a=function(t){function e(t){i.classCallCheck(this,e);var n=i.possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this));n.models=[],n.lookup={};for(var r in t)l[r]?n.on(r,t[r]):n[r]=t[r];return n}return i.inherits(e,t),i.createClass(e,[{key:"setModels",value:function(t){for(var e=this,n=new Array(t.length),r={},i=this.models,s=this.lookup,o=this.key,a=function(a){for(var h=t[a],c=o&&h[o],f=e.Model||u,d=(o?s[c]:i[a])||new f,v=function(t){var n=l[t];d.on(n,function(){for(var t=arguments.length,r=Array(t),i=0;t>i;i++)r[i]=arguments[i];e.trigger(n,[d].concat(r))})},g=0;g<l.length;g++)v(g);o&&(r[o]=d),n[a]=d,d.update(h)},h=0;h<t.length;h++)a(h);if(o)for(var c in s)r[c]||s[c].destroy();else for(var h=n.length;h<i.length;h++)i[h].destroy();this.models=n,this.lookup=r,this.parent.setChildren(n)}}]),e}(s);a.extend=function(t){return function(t){function e(t){return i.classCallCheck(this,e),i.possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this,t))}return i.inherits(e,t),e}(a)};var h=["init","inited","mount","mounted","unmount","unmounted","update","updated","destroy"].reduce(function(t,e){return t[e]=!0,t},{}),c=function(t){function e(t,n){i.classCallCheck(this,e);var r=i.possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this));for(var s in t)h[s]?r.on(s,t[s]):r[s]=t[s];return r.el.view=r,r.trigger("init",n),r.trigger("inited",n),r}return i.inherits(e,t),i.createClass(e,[{key:"setAttr",value:function(t,e){this.attrs||(this.attrs={}),this.attrs[t]!==e&&(e||""===e?(this.el.setAttribute(t,e),this.attrs[t]=e):(this.el.removeAttribute(t),this.attrs[t]=null))}},{key:"setClass",value:function(t,e){this.classes||(this.classes={}),this.classes[t]!==e&&(e?this.el.classList.add(t):this.el.classList.remove(t),this.classes[t]=e)}},{key:"setStyle",value:function(t,e){this.styles||(this.styles={}),this.styles[t]!==e&&(this.el.style[t]=e,this.styles[t]=e)}},{key:"setText",value:function(t){this.text!==t&&(this.el.textContent=t,this.text=t)}},{key:"setHTML",value:function(t){this.html!==t&&(this.el.innerHTML=t,this.html=t)}},{key:"addListener",value:function(t,e,n){var r=this,i={name:t,cb:e,proxy:function(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];e.apply(r,n)}};this.eventListeners||(this.eventListeners=[]),this.eventListeners.push(i),this.el.addEventListener(t,i.proxy,n)}},{key:"removeListener",value:function(t,e){var n=this.eventListeners;if(n)if("undefined"==typeof t){for(var r=0;r<n.length;r++)this.el.removeEventListener(n[r].proxy);this.listeners=[]}else if("undefined"==typeof e)for(var r=0;r<n.length;r++)n[r].name===t&&n.splice(r--,1);else for(var r=0;r<n.length;r++){var i=n[r];i.name===t&&e===i.cb&&n.splice(r--,1)}}},{key:"addChild",value:function(t){t.parent&&(t.trigger("unmount"),t.trigger("unmounted")),t.trigger("mount"),this.el.appendChild(t.el),t.parent=this,t.trigger("mounted")}},{key:"addBefore",value:function(t,e){t.parent&&(t.trigger("unmount"),t.trigger("unmounted")),t.trigger("mount"),this.el.insertBefore(t.el,e.el||e),t.parent=this,t.trigger("mounted")}},{key:"setChildren",value:function(){for(var t=this.el.firstChild,e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];for(var i=0;i<n.length;i++){var s=n[i];t!==s.el?(s.parent===this&&s.trigger("sort"),t?this.addBefore(s,t):this.addChild(s)):t=t.nextSibling}for(;t;){var o=t.nextSibling;t.view?t.view.parent.removeChild(t.view):this.el.removeChild(t),t=o}}},{key:"removeChild",value:function(t){t.parent&&(t.trigger("unmount"),this.el.removeChild(t.el),t.parent=null,t.trigger("unmounted"))}},{key:"update",value:function(t){this.trigger("update",t)}},{key:"destroy",value:function(){this.trigger("destroy"),this.parent.removeChild(this),this.off(),this.removeListener()}}]),e}(s);c.extend=function(t){return function(e){function n(e){return i.classCallCheck(this,n),i.possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this,t,e))}return i.inherits(n,e),n}(c)};var f=["init","inited","mount","mounted","unmount","unmounted","sort","sorted","update","updated","destroy"].reduce(function(t,e){return t[e]=!0,t},{}),d=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i.classCallCheck(this,e);var n=i.possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this));n.views=[],n.lookup={};for(var r in t)f[r]?n.on(r,t[r]):n[r]=t[r];return n}return i.inherits(e,t),i.createClass(e,[{key:"setViews",value:function(t){for(var e=this,n=new Array(t.length),r={},i=this.views,s=this.lookup,o=this.key,u=function(u){for(var l=t[u],a=o&&l[o],h=e.View||c,d=(o?s[a]:i[u])||new h,v=function(t){var n=f[t];d.on(n,function(){for(var t=arguments.length,r=Array(t),i=0;t>i;i++)r[i]=arguments[i];e.trigger(n,[d].concat(r))})},g=0;g<f.length;g++)v(g);o&&(r[o]=d),n[u]=d,d.update(l)},l=0;l<t.length;l++)u(l);if(o)for(var a in s)r[a]||s[a].destroy();else for(var l=n.length;l<i.length;l++)i[l].destroy();this.views=n,this.lookup=r,this.parent.setChildren(n)}}]),e}(s);d.extend=function(t){return function(e){function n(e){return i.classCallCheck(this,n),i.possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this,t,e))}return i.inherits(n,e),n}(d)},t.el=e,t.Collection=a,t.Model=u,t.Observable=s,t.View=c,t.ViewList=d,t.each=n,t.shuffle=r});