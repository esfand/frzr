!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.frzr={})}(this,function(t){"use strict";function e(t,e){var n=document.createElement(t);for(var i in e)"text"===i?n.textContent=e[i]:"html"===i?n.innerHTML=e[i]:n.setAttribute(i,e[i]);return n}function n(t,e){for(var n=0;n<t.length;n++)e(t[n],n)}function i(t){if(!t||!t.length)return t;for(var e=t.length-1;e>0;e--){var n=Math.random()*e|0,i=t[e];t[e]=t[n],t[n]=i}return t}function r(t,e,n){t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t["super"]=e;for(var i in n||{})t.prototype[i]=n[i]}function s(t){t.extend=function(e){function n(){for(var t,i=arguments.length,r=Array(i),s=0;i>s;s++)r[s]=arguments[s];(t=n["super"]).call.apply(t,[this,e].concat(r))}return r(n,t),n}}function o(){this.listeners={}}function h(t,e){if(!(this instanceof h))throw new Error("Something went wrong");h["super"].call(this);for(var n in t)u[n]?this.on(n,t[n]):this[n]=t[n];this.trigger("init",e),this.el.view=this,this.trigger("inited",e)}function l(t){l["super"].call(this),this.views=[],this.lookup={};for(var e in t)a[e]?this.on(e,t[e]):this[e]=t[e]}r(o,null,{on:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({cb:e,one:!1})},one:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({cb:e,one:!0})},trigger:function(t){var e=this.listeners[t];if(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];for(var s=0;s<e.length;s++)e[s].cb.apply(this,i),e[s].one&&e.splice(s--,1)}},off:function(t,e){if("undefined"==typeof t)this.listeners={};else if("undefined"==typeof e)this.listeners[t]=[];else{var n=this.listeners[t];if(!n)return;for(var i=0;i<n.length;i++)n[i].cb===e&&n.splice(i--,1)}}});var u="init inited mount mounted unmount unmounted update updated destroy".split(" ").reduce(function(t,e){return t[e]=!0,t},{});r(h,o,{setAttr:function(t,e){this.attrs||(this.attrs={}),this.attrs[t]!==e&&(e||""===e?(this.el.setAttribute(t,e),this.attrs[t]=e):(this.el.removeAttribute(t),this.attrs[t]=null))},setClass:function(t,e){this.classes||(this.classes={}),this.classes[t]!==e&&(e?this.el.classList.add(t):this.el.classList.remove(t),this.classes[t]=e)},setStyle:function(t,e){this.styles||(this.styles={}),this.styles[t]!==e&&(this.el.style[t]=e,this.styles[t]=e)},setText:function(t){this.text!==t&&(this.el.textContent=t,this.text=t)},setHTML:function(t){this.html!==t&&(this.el.innerHTML=t,this.html=t)},addListener:function(t,e,n){var i=this,r={name:t,cb:e,proxy:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];e.apply(i,n)}};this.eventListeners||(this.eventListeners=[]),this.eventListeners.push(r),this.el.addEventListener(t,r.proxy,n)},removeListener:function(t,e){var n=this.eventListeners;if(n)if("undefined"==typeof t){for(var i=0;i<n.length;i++)this.el.removeEventListener(n[i].proxy);this.listeners=[]}else if("undefined"==typeof e)for(var i=0;i<n.length;i++)n[i].name===t&&n.splice(i--,1);else for(var i=0;i<n.length;i++){var r=n[i];r.name===t&&e===r.cb&&n.splice(i--,1)}},addChild:function(t){return t.views?(t.parent=this,this.setChildren.apply(this,t.views)):(t.parent&&(t.trigger("unmount"),t.trigger("unmounted")),t.trigger("mount"),this.el.appendChild(t.el),t.parent=this,void t.trigger("mounted"))},addBefore:function(t,e){t.parent&&(t.trigger("unmount"),t.trigger("unmounted")),t.trigger("mount"),this.el.insertBefore(t.el,e.el||e),t.parent=this,t.trigger("mounted")},setChildren:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];if(e[0].views)return e[0].parent=this,this.setChildren.apply(this,e[0].views);for(var i=this.el.firstChild,r=0;r<e.length;r++){var s=e[r];i!==s.el?(s.parent===this&&s.trigger("sort"),i?this.addBefore(s,i):this.addChild(s)):i=i.nextSibling}for(;i;){var o=i.nextSibling;i.view?i.view.parent.removeChild(i.view):this.el.removeChild(i),i=o}},removeChild:function(t){t.parent&&(t.trigger("unmount"),this.el.removeChild(t.el),t.parent=null,t.trigger("unmounted"))},update:function(t){this.trigger("update",t)},destroy:function(){this.trigger("destroy"),this.parent.removeChild(this),this.off(),this.removeListener()}}),s(h);var a=["init","inited","mount","mounted","unmount","unmounted","sort","sorted","update","updated","destroy"].reduce(function(t,e){return t[e]=!0,t},{});r(l,o,{setViews:function(t){for(var e,n=this,i=new Array(t.length),r={},s=this.views,o=this.lookup,l=this.key,u=function(e){for(var u=t[e],f=l&&u[l],d=n.View||h,c=(l?o[f]:s[e])||new d,p=function(t){var e=a[t];c.on(e,function(){for(var t=arguments.length,i=Array(t),r=0;t>r;r++)i[r]=arguments[r];n.trigger(e,[c].concat(i))})},g=0;g<a.length;g++)p(g);l&&(r[l]=c),i[e]=c,c.update(u)},f=0;f<t.length;f++)u(f);if(l)for(var d in o)r[d]||o[d].destroy();else for(var f=i.length;f<s.length;f++)s[f].destroy();this.views=i,this.lookup=r,this.parent&&(e=this.parent).setChildren.apply(e,i)}}),s(l),t.el=e,t.Observable=o,t.View=h,t.ViewList=l,t.each=n,t.extend=r,t.extendable=s,t.shuffle=i});